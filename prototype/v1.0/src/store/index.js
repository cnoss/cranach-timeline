import Vue from 'vue';
import Vuex from 'vuex';
import axios from 'axios';

Vue.use(Vuex);

export default new Vuex.Store({
  state: {
    productionIds: [
      436037,
      436039,
      436042,
      436038,
      436040,
      436036,
      436033,
      436041,
      439081,
      27814,
      392024,
      383708,
      436043,
      358260,
      404502,
      390717,
      384173,
      371380,
      622987,
      622986,
      623797,
      623823,
      623817,
      622930,
      625281,
      625317,
      625298,
      625311,
      625309,
      625287,
      625319,
      625291,
      625361,
      625019,
      624974,
      625020,
      336244,
      336246,
      336245,
      336242,
      361827,
      432296,
      432298,
      432292,
      432301,
      432303,
      432302,
      397470,
      434170,
      434205,
      434207,
      434123,
      434119,
      434110,
      434112,
      434162,
      434165,
      432286,
      459253,
      436045,
      334800,
      337497,
      446297,
      436658,
      459055,
      435804,
      452112,
      436892,
      339116,
      452111,
      453164,
      436052,
      625661,
      437372,
      437371,
      436047,
      436046,
      338135,
      436518,
      437283,
      341296,
      435615,
      446602,
      45683,
      334655,
      437081,
      436941,
      453980,
      435759,
      435664,
      438467,
      437232,
      39654,
      436657,
      436337,
      436742,
      436910,
      437284,
      437061,
      436445,
      435838,
      193632,
      435809,
      437891,
      437823,
      437156,
      436649,
      679844,
      460486,
      461147,
      45032,
      435844,
      437820,
      748947,
      437342,
      437255,
    ],
    productions: [],
  },
  mutations: {
    addProduction(state, production) {
      state.productions.push(production);
    },
  },
  actions: {
    async fetchProductions({ state }) {
      const prods = [];

      const allPromises = state.productionIds.map(async (id) => {
        const production = await axios.get(`https://collectionapi.metmuseum.org/public/collection/v1/objects/${id}`);
        // return commit('addProduction', production.data);
        prods.push(production.data);
      });

      await Promise.all(allPromises);
      console.log(prods);
    },
  },
  modules: {
  },
});
